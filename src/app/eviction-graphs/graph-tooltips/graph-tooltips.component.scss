@import '../../../theme';

// Tooltips
// ----
$graphTooltipHeight: grid(4);
$graphTooltipCircleSize: 10px;
// year line and label
.year-marker {
  position:absolute;
  left:0;
  top:20px;
  height: calc(100% - #{grid(5)});
  width:1px;
  border-left: 1px dashed rgba(0,0,0,0.35);
  transition: transform 0.1s cubic-bezier(0, 0.66, 0.66, 1);
  span {
    position:absolute;
    bottom: -1*grid(3);
    left:0;
    width: grid(4);
    margin-left: -1*grid(2);
    @include numberFont(14px);
    text-align: center;
  }
}
// tooltip transitions
.tooltip {
  transition: transform 0.1s cubic-bezier(0, 0.66, 0.66, 1);
}
// tooltip container classes
.line-tooltips, .bar-tooltips {
  @include fill-parent();
  pointer-events: none;
}


// bar tooltip defaults ////
////////////////////////////
////////////////////////////
.bar-tooltips .tooltip {
  min-width: grid(3);
  margin-left: -65px;
  text-align:center;
  margin-top: -80px;
  &.tooltip-with-ci {
    // min-width: grid(6);
    // margin-left: -1*grid(5);
    margin-top: -89px;
  }
  .tooltip-cis {
    width: 100%;
    display: block;
  }
}
// END bar tooltip defaults //
//////////////////////////////
//////////////////////////////



// START OLD LINE TOOLTIPS CSS ///
//////////////////////////////////
// wrapper for line graph tooltip (so we can switch orientation)
// .tooltip-wrapper {
//   position:relative;
//   width:100%;
//   height:100%;
// }
// // line tooltip defaults
// .line-tooltips .tooltip {
//   height: $graphTooltipHeight;
//   line-height: 17px;
//   margin-top: -1*$graphTooltipHeight/2;
//   margin-left: $graphTooltipCircleSize/2;
//   .tooltip-wrapper {
//     .tooltip-cis {
//       width: auto;
//       display: inline-block;
//     }
//   }
//   // nudge arrow outside of wrapper 
//   &.right {
//     .tooltip-wrapper .tooltip-arrow {
//       top:50%;
//       left: -1*$tooltipArrowSize;
//     }
//   }
//   // shift the tooltip to the left and nudge the arrow out of the wrapper
//   &.left {
//     .tooltip-wrapper {
//       transform: translateX(-74px);
//       transform: translateX(calc(-100% - #{grid(3)}));
//       .tooltip-arrow {
//         top:50%;
//         right: -1*$tooltipArrowSize;
//       }
//     }
//   }
//   // circles that overlay the line
//   &:before {
//     content: "";
//     display:block;
//     width:$graphTooltipCircleSize;
//     height:$graphTooltipCircleSize;
//     border-radius:$graphTooltipCircleSize;
//     position:absolute;
//     top: calc(50% - #{$graphTooltipCircleSize / 2});
//     left: -1*$graphTooltipCircleSize;
//     z-index:1;
//   }
//   // circle colors
//   &:nth-child(2):before {
//     background:$color1;
//   }
//   &:nth-child(3):before {
//     background:$color2;
//   }
//   &:nth-child(4):before {
//     background:$color3;
//   }
//   &:nth-child(5):before {
//     background:$color4;
//   }
// }
// END OLD LINE TOOLTIPS CSS //
//////////////////////////////




// START NEW SCSS ////////
//////////////////////////
//////////////////////////
//////////////////////////

.line-tooltips .tooltip-container {
  display: flex;
  height: 100%;
  flex-direction: column;
  justify-content: center;
  transform: translateY(-18px);
}

.line-tooltips .circles-container .circles {
  // circles that overlay the line
  position: absolute;
  display: block;
  z-index:9999;
  height: $graphTooltipHeight;
  line-height: 17px;
  margin-top: -1*$graphTooltipHeight/2;
  margin-left: $graphTooltipCircleSize/2;

  &:before {
    content: "";
    display:block;
    width:$graphTooltipCircleSize;
    height:$graphTooltipCircleSize;
    border-radius:$graphTooltipCircleSize;
    position:absolute;
    top: calc(50% - #{$graphTooltipCircleSize / 2});
    left: -1*$graphTooltipCircleSize;
    z-index:1;
  }
  // circle colors
  &:nth-child(1):before {
    background:$color1;
  }
  &:nth-child(2):before {
    background:$color2;
  }
  &:nth-child(3):before {
    background:$color3;
  }
  &:nth-child(4):before {
    background:$color4;
  }
}

.tooltip-wrapper {
  position:relative;
  width: 200px;
  height:100%;
}
// line tooltip defaults
.line-tooltips .tooltip {
  // overwrite defauts
  position: relative;
  //end overwrite defaults
  margin-left: $graphTooltipCircleSize * 2;
  transition: height, .5s;
  .tooltip-wrapper {
    .tooltip-cis {
      width: auto;
      display: inline-block;
    }
  }
  // shift the tooltip to the left
  &.left {
    .tooltip-wrapper {
      // transform: translateX(-74px);
      transform: translateX(calc(-100% - #{grid(6)}));
    }
  }
}
.tooltip-container .tooltip {
  &:nth-of-type(1) .tooltip-inner-bubbles {
    background: $color1;
  }
  &:nth-of-type(2) .tooltip-inner-bubbles {
    background:$color2;
  }
  &:nth-of-type(3) .tooltip-inner-bubbles {
    background:$color3;
  }
  &:nth-of-type(4) .tooltip-inner-bubbles {
    background:$color4;
  }
}

.tooltip-inner {
  height: 100%;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-content: flex-start;
  align-items: flex-start;
  font-size: 12px !important;
}
.tooltip-inner > * {
  margin-left: 7px;
  margin-right: 7px;
}
.tooltip-header {
  display: flex;
  align-items: center;
  font-weight: bold;
  width: 100%;
  font-size: 16px !important;
  margin-bottom: 7px;
}

.tooltip-inner-bubbles {
  z-index: 9999;
  width:$graphTooltipCircleSize;
  height:$graphTooltipCircleSize;
  border-radius:$graphTooltipCircleSize;
  margin-right: 7px;
}
.tooltip-body {
  display: flex;
  flex-direction: row;
  align-content: center;
  align-items: center;
  justify-content: flex-start;
  font-size: 14px;
}
.ci-container {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  font-size: 10px;
  font-weight: normal;
  justify-content: center;
  height: 100%;
  margin-left: 10px;
}
// force the average circle to be $color4
::ng-deep .average-shown .circles:last-of-type:before {
  background:$color4!important;
}
// force the average circle to be $color4
::ng-deep .average-shown .tooltip:last-of-type .tooltip-inner-bubbles {
  background:$color4!important;
}
// END NEW SCSS //////////
//////////////////////////
//////////////////////////
//////////////////////////
