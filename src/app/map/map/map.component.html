<div class="map-wrapper">
  <app-mapbox
      [mapConfig]="mapConfig" 
      [eventLayers]="mapEventLayers"
      (ready)="onMapReady($event)"
      (zoom)="onMapZoom($event)"
      (featureClick)="onFeatureClick($event)"
      (hoverChanged)="onFeatureHover($event)"
      (render)="onMapRender($event)"
      (moveEnd)="onMapMoveEnd($event)"
  >
  </app-mapbox>
</div>
<div class="map-ui-wrapper">
  <app-progress-bar *ngIf="mapLoading"></app-progress-bar>
  <div class="map-ui">
      <app-ui-select
          tabindex="4"
          class="eviction-select"
          label="Eviction"
          labelProperty="name"
          [selectedValue]="activeBubbleHighlight"
          [values]="bubbleAttributes"
          (change)="setBubbleHighlight($event)"
      ></app-ui-select>
      <app-ui-select
          tabindex="5"
          class="layer-select"
          label="Display"
          labelProperty="name"
          [selectedValue]="activeDataLevel"
          [values]="dataLevels" 
          (change)="setGroupVisibility($event)">
      </app-ui-select>
      <app-ui-select
          tabindex="6"
          class="highlight-select"
          label="Highlight"
          labelProperty="name"
          [values]="attributes"
          (change)="setDataHighlight($event)">
      </app-ui-select>
      <div *ngIf="activeDataHighlight && activeDataHighlight.name !== 'None'" class="map-legend" [style.background]="getLegendGradient()">
          <span class="legend-start">{{legend[0][0]}}</span>
          <span class="legend-end">{{legend[legend.length - 1][0]}}</span>
      </div>
      <app-ui-hint 
          *ngIf="activeDataLevel && activeDataHighlight.name !== 'None'"
          class="legend-hint"
          [hint]="'The colored ' + activeDataLevel['name'] + ' on the map represent ' + activeDataHighlight['name'] + ' from ' + legend[0][0] + ' to ' + legend[legend.length - 1][0] + '.'" 
          placement="bottom"
      ></app-ui-hint>
  </div>
  <div class="year-slider-container">
    <app-ui-slider tabindex="9"
      class="year-slider"
      [currentValue]="dataYear" 
      [min]="1990" 
      [max]="2016" 
      (change)="setDataYear($event)"
    ></app-ui-slider>
  </div>
  
</div>